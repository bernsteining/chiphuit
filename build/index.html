<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="index.css">
    <title>chip8 emulator</title>
</head>

<body>
    <canvas id="canvas" height="32" width="64"></canvas>
    <div id="emulator_state" class="emulator_state"></div>

    <div class="keypad-base" id="keypad">
    </div>

    <label for="file-upload" class="custom-file-upload">
        <i class="fa fa-cloud-upload"></i> Choose chip8 ROM
    </label>

    <input id="file-upload" type="file" />
    <noscript>This page contains webassembly and javascript content, please enable javascript in your
        browser.</noscript>
    <script src='./chiphuit.js'></script>
    <script>
        const { handle_input } = wasm_bindgen;
        wasm_bindgen('./chiphuit_bg.wasm');

        document.onkeypress = keyboard_game;

        // handle keyboard
        function keyboard_game(event) {
            if (keys.includes(event.key.toUpperCase())) {
                document.getElementById(event.key.toUpperCase()).click();
            }
        }

        document.querySelector('input').addEventListener('change', function() {

        var reader = new FileReader();
        reader.onload = function() {

        var arrayBuffer = this.result,
            array = new Uint8Array(arrayBuffer),
            binaryString = String.fromCharCode.apply(null, array);

        console.log(binaryString);

        }
        reader.readAsArrayBuffer(this.files[0]);

        }, false);

    </script>
</body>

</html>